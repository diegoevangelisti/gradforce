<!DOCTYPE html>
<html lang="en">

<head>
  <script src="http://code.jquery.com/jquery-1.11.2.min.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/jackmoore/colorbox/master/jquery.colorbox-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.3/js.cookie.min.js"></script>
  <!-- One reload to refresh the content -->
  <script type='text/javascript'>
    (function () {
      if (window.localStorage) {
        if (!localStorage.getItem('firstLoad')) {
          localStorage['firstLoad'] = true;
          window.location.reload();
        } else
          localStorage.removeItem('firstLoad');
      }
    })();
  </script>
  <script>
    window.onload = function () {
      setTimeout(function () {
        document.body.style.opacity = "100";
      }, 300);
      window.scrollTo(0, 0);
    };
  </script>

  </script>
  <div w3-include-html="/partials/head.html"></div>

  <script>
    function includeHTML() {
      var z, i, elmnt, file, xhttp;
      /* Loop through a collection of all HTML elements: */
      z = document.getElementsByTagName("*");
      for (i = 0; i < z.length; i++) {
        elmnt = z[i];
        /*search for elements with a certain atrribute:*/
        file = elmnt.getAttribute("w3-include-html");
        if (file) {
          /* Make an HTTP request using the attribute value as the file name: */
          xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function () {
            if (this.readyState == 4) {
              if (this.status == 200) {
                elmnt.innerHTML = this.responseText;
              }
              if (this.status == 404) {
                elmnt.innerHTML = "Page not found.";
              }
              /* Remove the attribute, and call this function once more: */
              elmnt.removeAttribute("w3-include-html");
              includeHTML();
            }
          }
          xhttp.open("GET", file, true);
          xhttp.send();
          /* Exit the function: */
          return;
        }
      }
    }

    var increment = 0;
    var elementId = 0;
  </script>
</head>

<body>
  <!-- for pop up message -->
  <link rel="stylesheet" href="/assets/css/colorbox.css" />

  <style>
    body {
      opacity: 0;
    }
  </style>
  <% include ./partials/header %>
  <main id="std-profile">
    <div id="std-details" class="box">
      <a id="std-details-edit">
        <img class="editbtn" src="/assets/img/icons/edit.png" alt="edit icon">
      </a>
      <% if(user.img.data && user.img.data.length > 0){ %>
      <img class="centerimg mb10" style="max-width: 300px; max-height: 300px;" src="<%= user.img.data %>"
        alt="No photo">
      <% } else if(user.photo) { %>
      <img class="centerimg mb10" src="<%= user.photo %>" alt="No photo">
      <% } else { %>
      <img class="centerimg mb10" src="/assets/img/profile-placeholder.jpg" alt="No photo">
      <% } %>
      <h1 class="center" id="title"><%= user.fname %> <%= user.lname %></h1>
      <h2 class="center mb15" id="title"><%= user.title %></h2>
      <hr class="mb10">
      <h2 class="mb10">Contact Information</h2>
      <label for="email">Email address:</label>
      <p class="mb10"><%= user.email%></p>
      <% if(user.phone_number){ %>
      <label for="phone">Phone number:</label>
      <p class="mb10"><%= user.phone_number%></p>
      <% } %>
    </div>

    <!-- Modal for details section -->
    <div id="details-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" id="closeDetails" onclick="closeModal(id)">&times;</span>
          <h1>Personal Details</h1>
        </div>
        <div class="modal-body">
          <form id="edit-details-form" action="/profile/update-details/<%= user._id %>?_method=PUT" method="POST">
            <div id="edit-form-content">
              <label for="fname" class="mb2">
                Profile photo
              </label>
              <br>
              <div>
                Select an image file:
                <input type="file" id="fileInput">
                <input type="hidden" name="newPhoto" id="newPhoto">
              </div>
              <div id="fileDisplayArea"></div>
            </div>
            <div id="edit-form-content">
              <label for="fname" class="mb2">
                First Name
              </label>
              <br>
              <input name="fname" id="fname" class="text-input mb10" value="<%= user.fname%>">
            </div>
            <div id="edit-form-content">
              <label for="lname" class="mb2">
                Last Name
              </label>
              <br>
              <input name="lname" id="lname" class="text-input mb10" value="<%= user.lname%>">
            </div>
            <div id="edit-form-content">
              <label for="title" class="mb2">
                Title
              </label>
              <br>
              <input name="title" id="title" class="text-input mb10" value="<%= user.title%>">
            </div>
            <div id="edit-form-content">
              <label for="phone" class="mb2">
                Phone
              </label>
              <br>
              <input name="phone" id="phone" class="text-input mb10" value="<%= user.phone_number%>">
            </div>
            <div class="modal-footer">
              <div id="modal-footer-buttons">
                <button type="button" id="cancel" class="btn btnGreen btnGray mt10">
                  <span id="closeDetails" onclick="closeModal(id)">Cancel</span>
                </button>
                <button id="detailsSubmit" type="button" class="btn btnGreen mt10">
                  <span>Save</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- about me paragraph -->
    <div id="std-about" class="box">
      <!-- Trigger/Open The Modal -->
      <div class="about-info">
        <a id="std-about-edit">
          <img class="editbtn" src="/assets/img/icons/edit.png" alt="edit icon">
        </a>
        <h1 class="mb20">About me</h1>
        <p class="mb20"><%= user.about%></p>
        <h1 class="mb20">My Skills</h1>
        <div class="mt20">
          <% user.Skills.softs.forEach(function(skill, i) { %>
          <% if(i){ %>
          <span class="mb10 inline skill-card"><%= skill %></span>
          <% } %>
          <% }) %>
        </div>
      </div>
    </div>
    <!-- About popup for editing -->
    <!-- The Modal -->
    <div id="about-modal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" id="closeAbout" onclick="closeModal(id)">&times;</span>
          <h1>About you</h1>
        </div>
        <div class="modal-body">
          <form id="edit-about-form" action="/profile/update-about/<%= user._id%>?_method=PUT" method="POST">
            <div id="edit-form-content">
              <label for="about-summary" class="mb10 mt10">
                Define yourself in a <span style="font-weight: bold">short sentence</span>
              </label>
              <br>
              <input maxlength="90" name="summary" id="about-summary" class="about text-input mt10 mb10"
                value="<%= user.about %>">
              <!-- Skills -->
              <label for="about-summary" class="mb10 mt10">
                Enter your <span style="font-weight: bold">Skills</span>
              </label>
              <br>
              <!-- Add skills section -->
              <div id="student-skills-parent">
                <div id="student-skills" style="display: none">
                  <input id="skill" name="skills[]" list="skills-list" class="skills text-input mt10 mb10">
                  <datalist id="skills-list">
                    <% skills.forEach(function(skills, i){ %>
                    <option value="<%= skills.name %>"><%= skills.name %></option>
                    <% }) %>
                  </datalist>
                  <button id="delete-skill" type="button" class="btn btnGray inline">Delete
                  </button>
                </div>
              </div>
              <button id="add" type="button" class="btn btnGray mt20 mb20">
                <span>Add new skill</span>
              </button>
            </div>
            <div class=" modal-footer">
              <div id="modal-footer-buttons">
                <button type="button" id="cancel" class="btn btnGreen btnGray mt10">
                  <span id="closeAbout" onclick="closeModal(id)">Cancel</span>
                </button>
                <button type="button" id="submit-about-form" class="btn btnGreen mt10">
                  <span>Save</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- education info -->
    <div id="std-education" class="box">
      <div>
        <a id="add-education" class="addbtn">
          <img src="/assets/img/icons/add.png" alt="add icon">
        </a>
        <h1 class="mb20">My Education</h1>
      </div>
      <!-- Show all Education -->
      <!-- <p class="inline mt10 mb15">Status: <%= user.education_status%></p> -->
      <% counter = 0 %>
      <% user.education.forEach(function(element, i){ %>
      <% counter = counter + 1; %>
      <div class="education-info">
        <% if(i == 0) { %>
        <a class="delbtn" id="std-education-delete-<%= i %>">
          <img class="" src="/assets/img/icons/del.png" alt="del icon">
        </a><a class="editbtn" id="std-education-edit-<%= i %>">
          <img class="" src="/assets/img/icons/edit.png" alt="edit icon">
        </a>
        <p class="inline" style="font-weight: bold"><%= element.course%></p>
        <br>
        <h2><%= element.educational_provider%></h2>
        <p class="inline"><%= element.start_date%></p>
        <p class="inline"> - </p>
        <p class="inline"><%= element.end_date%></p>
        <br>
        <% } else { %>
        <hr class="mt15 mb15">
        <a class="delbtn" id="std-education-delete-<%= i %>">
          <img class="" src="/assets/img/icons/del.png" alt="del icon">
        </a><a class="editbtn" id="std-education-edit-<%= i %>">
          <img class="" src="/assets/img/icons/edit.png" alt="edit icon">
        </a>
        <p class="inline" style="font-weight: bold"><%= element.course%></p>
        <br>
        <h2><%= element.educational_provider%></h2>
        <p class="inline"><%= element.start_date%></p>
        <p class="inline"> - </p>
        <p class="inline"><%= element.end_date%></p>
        <br>
        <% } %>
      </div>
      <% }) %>
    </div>

    <!-- Model for delete education -->
    <div id="delete-education-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" id="closeDeleteEducation" onclick="closeModal(id)">&times;</span>
          <h1 id="education_title">Delete Education</h1>
        </div>
        <div class="modal-body">
          <form id="delete-education-form" action="/profile/delete-education/<%= user._id %>?_method=PUT" method="POST">
            <div id="edit-form-content">
              <p class="sub-title mt10 mb10">Are you sure you want to delete this education record ?</p>
            </div>
            <input type="hidden" id="deleteEducationNumber" name="deleteEducationNumber" type="text">
            <div class="modal-footer">
              <div id="modal-footer-buttons">
                <button type="button" id="cancel" class="btn btnGreen btnGray mt10">
                  <span id="closeDeleteEducation" onclick="closeModal(id)">No</span>
                </button>
                <button type="submit" class="btn btnGreen mt10">
                  <span>Yes</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal for edit education section -->
    <div id="education-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" id="closeEducation" onclick="closeModal(id)">&times;</span>
          <h1 id="edit_education_title"></h1>
        </div>
        <div class="modal-body">
          <form id="edit-education-form" action="/profile/update-education/<%= user._id %>?_method=PUT" method="POST">
            <div id="edit-form-content">
              <div>
                <label for="provider" class="mb2">
                  Educational Provider
                </label>
                <br>
                <select name="provider" id="provider" class="provider text-input mb10" type="text">
                  <option>Abacus Institute of Studies (Auckland)</option>
                  <option>AGI (Auckland)</option>
                  <option>AMES - The Institute of IT (Auckland)</option>
                  <option>Animation College</option>
                  <option>Ara Institute of Canterbury</option>
                  <option>Aspire2 International</option>
                  <option>Auckland Institute of Studies</option>
                  <option>Auckland University of Technology (AUT)</option>
                  <option>Avonmore Tertiary Institute</option>
                  <option>AWI International Education Group (Auckland)</option>
                  <option>Computer Power Plus</option>
                  <option>Cornell Institute of Business and Technology (Auckland)</option>
                  <option>Eastern Institute of Technology</option>
                  <option>EDENZ Colleges (Auckland)</option>
                  <option>Enspiral Dev Academy (Auckland)</option>
                  <option>Enspiral Dev Academy (Wellington)</option>
                  <option>ICL Graduate Business School (Auckland)</option>
                  <option>Kiwi Institute of Training and Education</option>
                  <option>Launchspace Academy</option>
                  <option>Lincoln University</option>
                  <option>Massey University (Albany)</option>
                  <option>Massey University (Palmerston North)</option>
                  <option>Massey University (Wellington)</option>
                  <option>Media Design School (Auckland)</option>
                  <option>MIT - Manukau Institute of Technology (Auckland)</option>
                  <option>National Technology Institute (NTEC)</option>
                  <option>Nelson Marlborough Institute of Technology (NMIT)</option>
                  <option>Newton College of Business and Technology (Auckland)</option>
                  <option>North Tec</option>
                  <option>NZEI -New Zealand Education Institute (Wellington)</option>
                  <option>NZIST (Auckland)</option>
                  <option>NZSE (Auckland)</option>
                  <option>Open Polytechnic</option>
                  <option>Otago Polytechnic</option>
                  <option>Regent International Education Group (Auckland)</option>
                  <option>Royal Business College</option>
                  <option>Southern Institute of Technology (SIT)</option>
                  <option>Tasman International Academies (Auckland)</option>
                  <option>Techtorium (Auckland)</option>
                  <option>Toi Ohomai Institute of Technology</option>
                  <option>UCOL (Palmerston North)</option>
                  <option>Udacity</option>
                  <option>Unitec Institute of Technology (Auckland)</option>
                  <option>University of Auckland</option>
                  <option>University of Canterbury</option>
                  <option>University of Otago</option>
                  <option>University of Waikato</option>
                  <option>UUNZ Institute of Business (Auckland)</option>
                  <option>Victoria University of Wellington</option>
                  <option>Vision College</option>
                  <option>Wellington ICT Graduate School (WICTGS)</option>
                  <option>Wellington Institute of Technology (Weltec)</option>
                  <option>Whitireia (Auckland)</option>
                  <option>Whitireia (Christchurch)</option>
                  <option>Whitireia (Wellington)</option>
                  <option>Wintec (Hamilton)</option>
                  <option>Yoobee School of Design (Auckland)</option>
                  <option>Yoobee School of Design (Christchurch)</option>
                  <option>Yoobee School of Design (Wellington)</option>
                </select>
                <input class="course text-input mb10" type="text" placeholder="Enter the Education provider"
                  id="selected_edit_provider" name="selected_edit_provider" style="display: none">

                <!-- Button to enter other provider, different than NZ options -->
                <div style="margin-bottom: 30px;">
                  <button type="button" id="edit-provider-button" class="btn btnGray other mt10">Enter other provider
                    ...
                  </button>
                </div>
                <input id="input_selected_edit_provider" name="input_selected_edit_provider" type="hidden"
                  style="display: none">
              </div>
              <div id="course-edit">
                <label for="course_edit" class="mb2">
                  Course or Bachelor
                </label>
                <br>
                <input id="course" class="course text-input mb10" type="text" name="course" value="">
              </div>
              <div id="start-year-edit">
                <label for="tart-year-edit" class="mb2">
                  Start Year
                </label>
                <br>
                <input id="start_year" class="year text-input mb10" type="text" name="start_year_edu" value="">
              </div>
              <div id="end-year-edit">
                <label for="previous-start-year-edit" class="mb2">
                  End Year (or Present)
                </label>
                <br>
                <input id="end_year" class="year text-input mb10" type="text" name="end_year_edu" value="">
              </div>
              <input type="hidden" id="educationNumber" name="educationNumber" type="text">
              <div class="modal-footer">
                <div id="modal-footer-buttons">
                  <button type="button" id="cancel" class="btn btnGreen btnGray mt10">
                    <span id="closeEducation" onclick="closeModal(id)">Cancel</span>
                  </button>
                  <button type="button" id="edit-provider-submit" class="btn btnGreen mt10">
                    <span>Save</span>
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal for adding education section -->
    <!-- Education status options:
      1. Undergraduate
      2. Graduate 
      3. Post-graduate
    -->
    <div id="education-modal-add" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" id="closeEducationAdd" onclick="closeModal(id)">&times;</span>
          <h1 id="education_title">Add Education</h1>
          <p>Help us connect you with the right companies</p>
        </div>
        <div class="modal-body">
          <form id="current-education-form" action="/profile/add-education/<%= user._id %>" method="POST">
            <div id="edit-form-content">
              <label for="course" class="mb2">
                What is your current education status?
              </label>
              <br>
              <div>
                <p>
                  <label>
                    <input id="Undergraduate" name="study-type" type="radio" value="Undergraduate" />
                    <span>Undergraduate</span>
                  </label>
                </p>
                <p>
                  <label>
                    <input id="Graduate" name="study-type" type="radio" value="Graduate" />
                    <span>Graduate</span>
                  </label>
                </p>
                <p>
                  <label>
                    <input id="Post-graduate" name="study-type" type="radio" value="Post-graduate" />
                    <span>Post-graduate</span>
                  </label>
                </p>
                <br>
              </div>
              <!-- Current Study -->
              <div id="current-study" style="display: none">
                <div id="current-providers">
                  <p class="mt10 mb2">Where are you<span style="font-weight: bold"> currently </span>studying?</p>
                  <select name="current_provider" id="current_provider_list" class="provider text-input mb10"
                    type="text">
                    <option>Abacus Institute of Studies (Auckland)</option>
                    <option>AGI (Auckland)</option>
                    <option>AMES - The Institute of IT (Auckland)</option>
                    <option>Animation College</option>
                    <option>Ara Institute of Canterbury</option>
                    <option>Aspire2 International</option>
                    <option>Auckland Institute of Studies</option>
                    <option>Auckland University of Technology (AUT)</option>
                    <option>Avonmore Tertiary Institute</option>
                    <option>AWI International Education Group (Auckland)</option>
                    <option>Computer Power Plus</option>
                    <option>Cornell Institute of Business and Technology (Auckland)</option>
                    <option>Eastern Institute of Technology</option>
                    <option>EDENZ Colleges (Auckland)</option>
                    <option>Enspiral Dev Academy (Auckland)</option>
                    <option>Enspiral Dev Academy (Wellington)</option>
                    <option>ICL Graduate Business School (Auckland)</option>
                    <option>Kiwi Institute of Training and Education</option>
                    <option>Launchspace Academy</option>
                    <option>Lincoln University</option>
                    <option>Massey University (Albany)</option>
                    <option>Massey University (Palmerston North)</option>
                    <option>Massey University (Wellington)</option>
                    <option>Media Design School (Auckland)</option>
                    <option>MIT - Manukau Institute of Technology (Auckland)</option>
                    <option>National Technology Institute (NTEC)</option>
                    <option>Nelson Marlborough Institute of Technology (NMIT)</option>
                    <option>Newton College of Business and Technology (Auckland)</option>
                    <option>North Tec</option>
                    <option>NZEI -New Zealand Education Institute (Wellington)</option>
                    <option>NZIST (Auckland)</option>
                    <option>NZSE (Auckland)</option>
                    <option>Open Polytechnic</option>
                    <option>Otago Polytechnic</option>
                    <option>Regent International Education Group (Auckland)</option>
                    <option>Royal Business College</option>
                    <option>Southern Institute of Technology (SIT)</option>
                    <option>Tasman International Academies (Auckland)</option>
                    <option>Techtorium (Auckland)</option>
                    <option>Toi Ohomai Institute of Technology</option>
                    <option>UCOL (Palmerston North)</option>
                    <option>Udacity</option>
                    <option>Unitec Institute of Technology (Auckland)</option>
                    <option>University of Auckland</option>
                    <option>University of Canterbury</option>
                    <option>University of Otago</option>
                    <option>University of Waikato</option>
                    <option>UUNZ Institute of Business (Auckland)</option>
                    <option>Victoria University of Wellington</option>
                    <option>Vision College</option>
                    <option>Wellington ICT Graduate School (WICTGS)</option>
                    <option>Wellington Institute of Technology (Weltec)</option>
                    <option>Whitireia (Auckland)</option>
                    <option>Whitireia (Christchurch)</option>
                    <option>Whitireia (Wellington)</option>
                    <option>Wintec (Hamilton)</option>
                    <option>Yoobee School of Design (Auckland)</option>
                    <option>Yoobee School of Design (Christchurch)</option>
                    <option>Yoobee School of Design (Wellington)</option>
                  </select>
                  <input id="selected_current_provider" name="selected_current_provider" type="hidden"
                    style="display: none">
                  <!-- Button to enter other provider, different than NZ options -->
                  <div style="margin-bottom: 30px;">
                    <input id="selected_current_provider_other" placeholder="Enter the provider name"
                      class="provider text-input mb10" name="selected_current_provider_other" style="display: none">
                    <button type="button" id="current-provider" class="btn btnGray other mt10">Enter other provider ...
                    </button>
                  </div>
                </div>
                <div id="current-course">
                  <label for="current_course" class="mb2">
                    Course or Bachelor
                  </label>
                  <br>
                  <input id="current_course" class="course text-input mb10" type="text" name="current_course" value="">
                </div>
                <div id="current-start-year">
                  <label for="current-start-year" class="mb2">
                    Start Year
                  </label>
                  <br>
                  <input id="current_start_year" class="year text-input mb10" type="text" name="current_start_year"
                    value="">
                </div>
                <div id="current-end-year">
                  <label for="end_yer" class="mb2">
                    End Year (or Present)
                  </label>
                  <br>
                  <input id="current_end_year" class="year text-input mb10" type="text" name="current_end_year"
                    value="">
                </div>
              </div>

              <!-- Button to continue with Previous Study for Post-graduate -->
              <div>
                <button id="next-education" style="display: none" type="button" class="btn btnGreen mt10 mb10">
                  <span id="nextEducation">Continue</span>
                </button>
              </div>

              <!-- Previous Study for Post-graduate-->
              <div id="previous-study" style="display: none">
                <div id="previous-provider">
                  <p class="mt10 mb2">Where<span style="font-weight: bold"> have </span>you studied?</p>
                  <select name="previous_provider_list" id="previous_provider_list" class="provider text-input mb10"
                    type="text">
                    <option>Abacus Institute of Studies (Auckland)</option>
                    <option>AGI (Auckland)</option>
                    <option>AMES - The Institute of IT (Auckland)</option>
                    <option>Animation College</option>
                    <option>Ara Institute of Canterbury</option>
                    <option>Aspire2 International</option>
                    <option>Auckland Institute of Studies</option>
                    <option>Auckland University of Technology (AUT)</option>
                    <option>Avonmore Tertiary Institute</option>
                    <option>AWI International Education Group (Auckland)</option>
                    <option>Computer Power Plus</option>
                    <option>Cornell Institute of Business and Technology (Auckland)</option>
                    <option>Eastern Institute of Technology</option>
                    <option>EDENZ Colleges (Auckland)</option>
                    <option>Enspiral Dev Academy (Auckland)</option>
                    <option>Enspiral Dev Academy (Wellington)</option>
                    <option>ICL Graduate Business School (Auckland)</option>
                    <option>Kiwi Institute of Training and Education</option>
                    <option>Launchspace Academy</option>
                    <option>Lincoln University</option>
                    <option>Massey University (Albany)</option>
                    <option>Massey University (Palmerston North)</option>
                    <option>Massey University (Wellington)</option>
                    <option>Media Design School (Auckland)</option>
                    <option>MIT - Manukau Institute of Technology (Auckland)</option>
                    <option>National Technology Institute (NTEC)</option>
                    <option>Nelson Marlborough Institute of Technology (NMIT)</option>
                    <option>Newton College of Business and Technology (Auckland)</option>
                    <option>North Tec</option>
                    <option>NZEI -New Zealand Education Institute (Wellington)</option>
                    <option>NZIST (Auckland)</option>
                    <option>NZSE (Auckland)</option>
                    <option>Open Polytechnic</option>
                    <option>Otago Polytechnic</option>
                    <option>Regent International Education Group (Auckland)</option>
                    <option>Royal Business College</option>
                    <option>Southern Institute of Technology (SIT)</option>
                    <option>Tasman International Academies (Auckland)</option>
                    <option>Techtorium (Auckland)</option>
                    <option>Toi Ohomai Institute of Technology</option>
                    <option>UCOL (Palmerston North)</option>
                    <option>Udacity</option>
                    <option>Unitec Institute of Technology (Auckland)</option>
                    <option>University of Auckland</option>
                    <option>University of Canterbury</option>
                    <option>University of Otago</option>
                    <option>University of Waikato</option>
                    <option>UUNZ Institute of Business (Auckland)</option>
                    <option>Victoria University of Wellington</option>
                    <option>Vision College</option>
                    <option>Wellington ICT Graduate School (WICTGS)</option>
                    <option>Wellington Institute of Technology (Weltec)</option>
                    <option>Whitireia (Auckland)</option>
                    <option>Whitireia (Christchurch)</option>
                    <option>Whitireia (Wellington)</option>
                    <option>Wintec (Hamilton)</option>
                    <option>Yoobee School of Design (Auckland)</option>
                    <option>Yoobee School of Design (Christchurch)</option>
                    <option>Yoobee School of Design (Wellington)</option>
                  </select>
                  <input id="selected_previous_provider" name="selected_previous_provider" type="hidden">
                  <!-- Button to enter other provider, different than NZ options -->
                  <div style="margin-bottom: 30px;">
                    <input id="selected_previous_provider_other" placeholder="Enter the provider name"
                      class="provider text-input mb10" name="selected_previous_provider_other" style="display: none">
                    <button type="button" id="previous-provider-button" class="btn btnGray other mt10">Enter other
                      provider ...
                    </button>
                  </div>
                </div>
                <div id="previous-course">
                  <label for="previous_course" class="mb2">
                    Course or Bachelor
                  </label>
                  <br>
                  <input id="course" class="course text-input mb10" type="text" name="previous_course" value="">
                </div>
                <div id="previous-start-year">
                  <label for="previous-start-year" class="mb2">
                    Start Year
                  </label>
                  <br>
                  <input id="start_year" class="year text-input mb10" type="text" name="previous_start_year" value="">
                </div>
                <div id="previous-end-year">
                  <label for="previous_end_yer" class="mb2">
                    End Year (or Present)
                  </label>
                  <br>
                  <input id="end_year" class="year text-input mb10" type="text" name="previous_end_year" value="">
                </div>
              </div>

              <!-- Button to go back to Current Study -->
              <div>
                <button id="back-education" style="display: none" type="button" class="btn btnGray mt10 mb10">
                  <span id="backEducation">Go back</span>
                </button>
              </div>

              <!-- Add other previous education button -->
              <div id="add-other-previous-education-title" style="display: none">
                <p class="title mt30 mb15">Add other previous education</p>
              </div>

              <!-- Other Previous Study -->
              <div id="other-previous-study" style="display: none">
                <div id="other_previous-provider">
                  <p class="mt10 mb2">Where<span style="font-weight: bold"> have </span>you studied?</p>
                  <select name="previous_provider" id="provider_list" class="provider text-input mb10" type="text">
                    <option>Abacus Institute of Studies (Auckland)</option>
                    <option>AGI (Auckland)</option>
                    <option>AMES - The Institute of IT (Auckland)</option>
                    <option>Animation College</option>
                    <option>Ara Institute of Canterbury</option>
                    <option>Aspire2 International</option>
                    <option>Auckland Institute of Studies</option>
                    <option>Auckland University of Technology (AUT)</option>
                    <option>Avonmore Tertiary Institute</option>
                    <option>AWI International Education Group (Auckland)</option>
                    <option>Computer Power Plus</option>
                    <option>Cornell Institute of Business and Technology (Auckland)</option>
                    <option>Eastern Institute of Technology</option>
                    <option>EDENZ Colleges (Auckland)</option>
                    <option>Enspiral Dev Academy (Auckland)</option>
                    <option>Enspiral Dev Academy (Wellington)</option>
                    <option>ICL Graduate Business School (Auckland)</option>
                    <option>Kiwi Institute of Training and Education</option>
                    <option>Launchspace Academy</option>
                    <option>Lincoln University</option>
                    <option>Massey University (Albany)</option>
                    <option>Massey University (Palmerston North)</option>
                    <option>Massey University (Wellington)</option>
                    <option>Media Design School (Auckland)</option>
                    <option>MIT - Manukau Institute of Technology (Auckland)</option>
                    <option>National Technology Institute (NTEC)</option>
                    <option>Nelson Marlborough Institute of Technology (NMIT)</option>
                    <option>Newton College of Business and Technology (Auckland)</option>
                    <option>North Tec</option>
                    <option>NZEI -New Zealand Education Institute (Wellington)</option>
                    <option>NZIST (Auckland)</option>
                    <option>NZSE (Auckland)</option>
                    <option>Open Polytechnic</option>
                    <option>Otago Polytechnic</option>
                    <option>Regent International Education Group (Auckland)</option>
                    <option>Royal Business College</option>
                    <option>Southern Institute of Technology (SIT)</option>
                    <option>Tasman International Academies (Auckland)</option>
                    <option>Techtorium (Auckland)</option>
                    <option>Toi Ohomai Institute of Technology</option>
                    <option>UCOL (Palmerston North)</option>
                    <option>Udacity</option>
                    <option>Unitec Institute of Technology (Auckland)</option>
                    <option>University of Auckland</option>
                    <option>University of Canterbury</option>
                    <option>University of Otago</option>
                    <option>University of Waikato</option>
                    <option>UUNZ Institute of Business (Auckland)</option>
                    <option>Victoria University of Wellington</option>
                    <option>Vision College</option>
                    <option>Wellington ICT Graduate School (WICTGS)</option>
                    <option>Wellington Institute of Technology (Weltec)</option>
                    <option>Whitireia (Auckland)</option>
                    <option>Whitireia (Christchurch)</option>
                    <option>Whitireia (Wellington)</option>
                    <option>Wintec (Hamilton)</option>
                    <option>Yoobee School of Design (Auckland)</option>
                    <option>Yoobee School of Design (Christchurch)</option>
                    <option>Yoobee School of Design (Wellington)</option>
                  </select>
                </div>
                <div id="previous-course">
                  <label for="other_previous_course" class="mb2">
                    Course or Bachelor
                  </label>
                  <br>
                  <input id="course" class="course text-input mb10" type="text" name="other_previous_course" value="">
                </div>
                <div id="previous-start-year">
                  <label for="previous-start-year" class="mb2">
                    Start Year
                  </label>
                  <br>
                  <input id="start_year" class="year text-input mb10" type="text" name="other_previous_start_year"
                    value="">
                </div>
                <div id="previous-end-year">
                  <label for="previous_end_year" class="mb2">
                    End Year (or Present)
                  </label>
                  <br>
                  <input id="end_year" class="year text-input mb10" type="text" name="other_previous_end_year" value="">
                </div>
              </div>
              <!-- Button to cancel adding other previous education -->
              <button type="button" style="display: none" id="cancel-add-other-previous-education"
                class="btn btnGray mt10 mb10">
                <span>Cancel</span>
              </button>
              <!-- Button to add other previous education -->
              <button type="button" id="add-other-previous-education" class="btn btnGreen mt10"
                style="background: #74bdc5">
                <span id="addOtherEducation"><i class="fas fa-plus"></i> Add
                  other previous education</span>
              </button>
            </div>
            <input type="hidden" id="education_status" name="education_status" type="text">
            <div class="modal-footer">
              <div id="modal-footer-buttons">
                <button type="button" id="cancel" class="btn btnGray mt10">
                  <span id="closeEducationAdd" onclick="closeModal(id)">Cancel</span>
                </button>
                <button type="button" class="btn btnGreen mt10" id="education-form-submit">
                  <span>Save</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal for adding other previous education record -->

    <div id="other-education-modal-add" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" id="closeOtherEducationAdd" onclick="closeModal(id)">&times;</span>
          <h1 id="education_title">Add Education</h1>
          <p>Let us know what you have learned</p>
        </div>
        <div class="modal-body">
          <form id="add-other-education-form" action="/profile/add-other-education/<%= user._id %>" method="POST">
            <div id="edit-form-content">
              <!-- Other Previous Study -->
              <div id="other-previous-study">
                <div id="other_previous-provider">
                  <p class="mt30 mb2">Where<span style="font-weight: bold"> have </span>you studied?</p>
                  <select name="previous_provider_list_other" id="previous_provider_list_other"
                    class="provider text-input mb10" type="text">
                    <option>Abacus Institute of Studies (Auckland)</option>
                    <option>AGI (Auckland)</option>
                    <option>AMES - The Institute of IT (Auckland)</option>
                    <option>Animation College</option>
                    <option>Ara Institute of Canterbury</option>
                    <option>Aspire2 International</option>
                    <option>Auckland Institute of Studies</option>
                    <option>Auckland University of Technology (AUT)</option>
                    <option>Avonmore Tertiary Institute</option>
                    <option>AWI International Education Group (Auckland)</option>
                    <option>Computer Power Plus</option>
                    <option>Cornell Institute of Business and Technology (Auckland)</option>
                    <option>Eastern Institute of Technology</option>
                    <option>EDENZ Colleges (Auckland)</option>
                    <option>Enspiral Dev Academy (Auckland)</option>
                    <option>Enspiral Dev Academy (Wellington)</option>
                    <option>ICL Graduate Business School (Auckland)</option>
                    <option>Kiwi Institute of Training and Education</option>
                    <option>Launchspace Academy</option>
                    <option>Lincoln University</option>
                    <option>Massey University (Albany)</option>
                    <option>Massey University (Palmerston North)</option>
                    <option>Massey University (Wellington)</option>
                    <option>Media Design School (Auckland)</option>
                    <option>MIT - Manukau Institute of Technology (Auckland)</option>
                    <option>National Technology Institute (NTEC)</option>
                    <option>Nelson Marlborough Institute of Technology (NMIT)</option>
                    <option>Newton College of Business and Technology (Auckland)</option>
                    <option>North Tec</option>
                    <option>NZEI -New Zealand Education Institute (Wellington)</option>
                    <option>NZIST (Auckland)</option>
                    <option>NZSE (Auckland)</option>
                    <option>Open Polytechnic</option>
                    <option>Otago Polytechnic</option>
                    <option>Regent International Education Group (Auckland)</option>
                    <option>Royal Business College</option>
                    <option>Southern Institute of Technology (SIT)</option>
                    <option>Tasman International Academies (Auckland)</option>
                    <option>Techtorium (Auckland)</option>
                    <option>Toi Ohomai Institute of Technology</option>
                    <option>UCOL (Palmerston North)</option>
                    <option>Udacity</option>
                    <option>Unitec Institute of Technology (Auckland)</option>
                    <option>University of Auckland</option>
                    <option>University of Canterbury</option>
                    <option>University of Otago</option>
                    <option>University of Waikato</option>
                    <option>UUNZ Institute of Business (Auckland)</option>
                    <option>Victoria University of Wellington</option>
                    <option>Vision College</option>
                    <option>Wellington ICT Graduate School (WICTGS)</option>
                    <option>Wellington Institute of Technology (Weltec)</option>
                    <option>Whitireia (Auckland)</option>
                    <option>Whitireia (Christchurch)</option>
                    <option>Whitireia (Wellington)</option>
                    <option>Wintec (Hamilton)</option>
                    <option>Yoobee School of Design (Auckland)</option>
                    <option>Yoobee School of Design (Christchurch)</option>
                    <option>Yoobee School of Design (Wellington)</option>
                  </select>
                  <input class="course text-input mb10" type="text" placeholder="Enter the Education provider"
                    id="selected_previous_provider_other_other" name="selected_previous_provider_other_other"
                    style="display: none">

                  <!-- Button to enter other provider, different than NZ options -->
                  <div style="margin-bottom: 30px;">
                    <button type="button" id="other-provider" class="btn btnGray other mt10">Enter other provider ...
                    </button>
                  </div>
                  <input id="selected_previous_provider_other" name="selected_previous_provider_other" type="hidden"
                    style="display: none">

                </div>
                <div id="previous-course">
                  <label for="other_previous_course" class="mb2">
                    Course or Bachelor
                  </label>
                  <br>
                  <input id="course" class="course text-input mb10" type="text" name="other_previous_course" value="">
                </div>
                <div id="previous-start-year">
                  <label for="previous-start-year" class="mb2">
                    Start Year
                  </label>
                  <br>
                  <input id="start_year" class="year text-input mb10" type="text" name="other_previous_start_year"
                    value="">
                </div>
                <div id="previous-end-year">
                  <label for="previous_end_year" class="mb2">
                    End Year (or Present)
                  </label>
                  <br>
                  <input id="end_year" class="year text-input mb10" type="text" name="other_previous_end_year" value="">
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <div id="modal-footer-buttons">
                <button type="button" id="cancel" class="btn btnGray mt10">
                  <span id="closeOtherEducationAdd" onclick="closeModal(id)">Cancel</span>
                </button>
                <button type="button" class="btn btnGreen mt10" id="other-education-form-submit">
                  <span>Save</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>


    <!-- work experience -->
    <div id="std-experience" class="box">
      <div>
        <a class="addbtn" id="add-experience">
          <img src="assets/img/icons/add.png" alt="edit icon">
        </a>
        <h1 class="mb20">My Work Experience</h1>
      </div>
      <% count = 0 %>
      <!-- Show all work experience -->
      <% user.work.forEach(function(element, i){ %>
      <% count = count + 1; %>
      <div class="experience-info">

        <% if(i == 0) { %>
        <a class="delbtn" id="std-experience-delete-<%= i %>">
          <img src="/assets/img/icons/del.png" alt="del icon"><a class="editbtn" id="std-experience-edit-<%= i %>">
            <img src="/assets/img/icons/edit.png" alt="edit icon">
          </a>
          <p class="inline" style="font-weight: bold"><%= element.role%></p>
          <br>
          <p class="inline"><%= element.company%></p>
          <br>
          <p class="inline"><%= element.start_date%></p>
          <p class="inline"> - </p>
          <p class="inline"><%= element.end_date%></p>
          <br>
          <p class="inline"><%= element.description%></p>
          <% } else { %>
          <hr class="mb15 mt15">
          <a class="delbtn" id="std-experience-delete-<%= i %>">
            <img src="/assets/img/icons/del.png" alt="del icon"><a class="editbtn" id="std-experience-edit-<%= i %>">
              <img src="/assets/img/icons/edit.png" alt="edit icon">
            </a>
            <p class="inline" style="font-weight: bold"><%= element.role%></p>
            <br>
            <p class="inline"><%= element.company%></p>
            <br>
            <p class="inline"><%= element.start_date%></p>
            <p class="inline"> - </p>
            <p class="inline"><%= element.end_date%></p>
            <br>
            <p class="inline"><%= element.description%></p>
            <% } %>
      </div>
      <% }) %>
    </div>

    <!-- Modal for experience section -->
    <div id="experience-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" id="closeExperience" onclick="closeModal(id)">&times;</span>
          <h1>Update Work Experience</h1>
        </div>
        <div class="modal-body">
          <form id="edit-experience-form" action="/profile/update-work-experience/<%= user._id %>?_method=PUT"
            method="POST">
            <div id="edit-form-content">
              <label for="company" class="mb2">
                Role
              </label>
              <br>
              <input id="role" class="text-input mb10" type="text" name="role" value="">
            </div>
            <div id="edit-form-content">
              <label for="" class="mb2">
                Company
              </label>
              <br>
              <input id="company" class="text-input mb10" type="text" name="company" value="">
            </div>
            <div id="edit-form-content">
              <label for="" class="mb2">
                Start Year
              </label>
              <br>
              <input id="start_year" class="year text-input mb10" type="text" name="start_year" value="">
            </div>
            <div id="edit-form-content">
              <label for="" class="mb2">
                End Year (or Present)
              </label>
              <br>
              <input id="end_year" class="year text-input mb10" type="text" name="end_year" value="">
            </div>
            <div id="edit-form-content">
              <label for="" class="mb2">
                Description
              </label>
              <br>
              <input id="work_description" class="description text-input mb10" type="text" name="work_description"
                value="">
            </div>
            <input type="hidden" id="experienceNumber" name="experienceNumber" type="text">
            <div class="modal-footer">
              <div id="modal-footer-buttons">
                <button type="button" id="cancel" class="btn btnGreen btnGray mt10">
                  <span id="closeExperience" onclick="closeModal(id)">Cancel</span>
                </button>
                <button type="submit" class="btn btnGreen mt10">
                  <span>Save</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <!-- Modal for adding experience section -->
    <div id="experience-modal-add" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <span class="close" id="closeExperienceAdd" onclick="closeModal(id)">&times;</span>
          <h1 id="experience_title">Add Working experience</h1>
        </div>
        <div class="modal-body">
          <form id="edit-experience-form" action="/profile/add-work-experience/<%= user._id %>" method="POST">
            <div id="edit-form-content">
              <label for="company" class="mb2">
                What is/was your <span style="font-weight: bold"> Role</span>?
              </label>
              <br>
              <input id="role" class="role text-input mb10" type="text" name="role" value="">
            </div>
            <div id="edit-form-content" class="mt10">
              <label for="" class="mb2">
                Company name
              </label>
              <br>
              <input id="company" class="company text-input mb10" type="text" name="company" value="">
            </div>
            <div id="edit-form-content" class="mt10">
              <label for="" class="mb2">
                Start Year
              </label>
              <br>
              <input id="start_year" class="year text-input mb10" type="text" name="start_year" value="">
            </div>
            <div id="edit-form-content">
              <label for="" class="mb2">
                End Year (or Present)
              </label>
              <br>
              <input id="end_year" class="year text-input mb10" type="text" name="end_year" value="">
            </div>
            <div id="edit-form-content">
              <label for="" class="mb2">
                Description of your position in just a few words...
              </label>
              <br>
              <input id="work_description" class="description text-input mb10" type="text" name="work_description"
                value="" placeholder="Ex: Front end developer, Designer, Help-desk, ...">
            </div>
            <input type="hidden" id="experienceNumber" name="experienceNumber" type="text">
            <div class="modal-footer">
              <div id="modal-footer-buttons">
                <button type="button" id="cancel" class="btn btnGreen btnGray mt10">
                  <span id="closeExperienceAdd" onclick="closeModal(id)">Cancel</span>
                </button>
                <button type="submit" class="btn btnGreen mt10">
                  <span>Save</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <!-- Model for delete education -->
  <div id="delete-experience-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="close" id="closeDeleteExperience" onclick="closeModal(id)">&times;</span>
        <h1 id="experience-title">Delete Work Experience</h1>
      </div>
      <div class="modal-body">
        <form id="delete-experience-form" action="/profile/delete-work-experience/<%= user._id %>?_method=PUT"
          method="POST">
          <div id="edit-form-content">
            <p class="sub-title mt10 mb10">Are you sure you want to delete this work experience from your profile?</p>
          </div>
          <input type="hidden" id="deleteExperienceNumber" name="deleteExperienceNumber" type="text">
          <div class="modal-footer">
            <div id="modal-footer-buttons">
              <button type="button" id="cancel" class="btn btnGreen btnGray mt10">
                <span id="closeDeleteExperience" onclick="closeModal(id)">No</span>
              </button>
              <button type="submit" class="btn btnGreen mt10">
                <span>Yes</span>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Model for Log in pop up message -->

  <div id="popup-modal" class="box" style="display: none; background: rgb(251, 251, 251);">
    <!-- <h2 class="center" id="title">Hi <%= user.fname %> <%= user.lname %> !</h2> -->
    <h2 class="center" style="font-weight: bold; font-size: 24px">Welcome to GradForce</h2>
    <br>
    <hr>
    <br>
    <p class="mb10 center">Please complete your profile so we can continue with the process.</p>
    <p class="mb10 center">Follow the instructions we sent you to <span
        style="font-weight: bold;"><%= user.email %></span></p><br>
    <h2 class="center" style="font-weight: bold; font-size: 20px">Thanks!</h2>
  </div>

  <div w3-include-html="/partials/footer.html"></div>

  <script>
    includeHTML();

    // Get the modals
    let detailsModal = document.getElementById("details-modal");
    let aboutModal = document.getElementById("about-modal");
    let educationModal = document.getElementById("education-modal");
    let educationModalAdd = document.getElementById("education-modal-add");
    let OtherEducationModalAdd = document.getElementById("other-education-modal-add");
    let experienceModal = document.getElementById("experience-modal");
    let experienceModalAdd = document.getElementById("experience-modal-add");
    let deleteEducationModal = document.getElementById("delete-education-modal");
    let deleteExperienceModal = document.getElementById("delete-experience-modal");


    // Get the buttons that opens the modals

    //to add
    let addEducation = document.getElementById("add-education");
    let addExperience = document.getElementById("add-experience");
    let nextEducation = document.getElementById("next-education");
    let backEducation = document.getElementById("back-education");
    let addOtherEducation = document.getElementById("add-other-previous-education");
    let AddOtherEducationTitle = document.getElementById("add-other-previous-education-title");
    let cancelAddOtherEducation = document.getElementById("cancel-add-other-previous-education");
    let otherEducation = document.getElementById("other-previous-study");


    //to edit
    let detailsEditBtn = document.getElementById("std-details-edit");
    let aboutEditBtn = document.getElementById("std-about-edit");
    let educationEditBtn = [];
    let experienceEditBtn = [];

    //to delete
    let educationDeleteBtn = [];
    let experienceDeleteBtn = [];
    let deleteSkillBtn = [];

    let i = 0;
  </script>
  <%  for(var i = 0; i < count; ++i) { %>
  <script>
    experienceEditBtn[i] = document.getElementById("std-experience-edit-" + i);
    ++i;
  </script>
  <% } %>

  <script>
    j = 0;
  </script>
  <%  for(var i = 0; i < counter; ++i) { %>
  <script>
    educationEditBtn[j] = document.getElementById("std-education-edit-" + j);
    ++j;
  </script>
  <% } %>

  <script>
    j = 0;
  </script>


  <script>
    // Get the <span> elements that close the modals
    var span = document.getElementsByClassName("close")[0];
    var cancelBtn = document.getElementById("cancel");

    // When the user clicks the button, open the specific modal 
    aboutEditBtn.onclick = function () {
      aboutModal.style.display = "block";
    }
    i = 0;
  </script>

  <!-- Keep all work experience's ID in an array -->
  <% for(var i=0 ; i< count ; ++i) { %>
  <script>
    experienceEditBtn[i].onclick = function () {

        document.getElementById("role").value = '<%= user.work[i].role %>';
        document.getElementById("company").value = '<%= user.work[i].company %>';
        document.getElementById("start_year").value = '<%= user.work[i].start_date %>';
        document.getElementById("end_year").value = '<%= user.work[i].end_date %>';
        document.getElementById("work_description").value = '<%= user.work[i].description %>';
        document.getElementById("experienceNumber").value = '<%= i %>';
        experienceModal.style.display = "block";
      }
      ++i;
  </script>
  <% } %>
  <script>
    j = 0;
  </script>
  <!-- Keep all education's ID in an array -->
  <% for(var i=0 ; i< counter ; ++i) { %>
  <script>
    educationEditBtn[j].onclick = function () {

        document.getElementById("course").value = '<%= user.education[i].course %>';
        document.getElementById("provider").value = '<%= user.education[i].educational_provider %>';
        document.getElementById("start_year").value = '<%= user.education[i].start_date %>';
        document.getElementById("end_year").value = '<%= user.education[i].end_date %>';
        document.getElementById("educationNumber").value = '<%= i %>';
        document.getElementById("edit_education_title").innerHTML = 'Edit "<%= user.education[i].course %>"';
        educationModal.style.display = "block";
      }
      ++j;
  </script>
  <% } %>


  <!-- if education is empty open normal education modal -->
  <% if(!user.education.length) { %>
  <script>
    addEducation.onclick = function () {
      educationModalAdd.style.display = "block";
      addOtherEducation.style.display = "none";
    }
  </script>
  <%  } %>
  <!-- if education is not empty open add another education modal -->
  <% if(user.education.length) { %>
  <script>
    addEducation.onclick = function () {

      OtherEducationModalAdd.style.display = "block";
      addOtherEducation.style.display = "none";
    }
  </script>
  <% } %>

  <!-- Section for DELETING education records -->
  <script>
    j = 0;
  </script>
  <%  for(var i = 0; i < counter; ++i) { %>
  <script>
    educationDeleteBtn[j] = document.getElementById("std-education-delete-" + j);
    ++j;
  </script>
  <% } %>
  <script>
    j = 0;
  </script>

  <!-- Go through all delete buttons for education record-->
  <% for(var i=0 ; i< counter ; ++i) { %>
  <script>
    educationDeleteBtn[j].onclick = function () {

        deleteEducationModal.style.display = "block";
        document.getElementById("deleteEducationNumber").value = '<%= i %>';
      }
      ++j;
  </script>
  <% } %>


  <!-- Section for DELETING working experience records -->
  <script>
    j = 0;
  </script>
  <%  for(var i = 0; i < count; ++i) { %>
  <script>
    experienceDeleteBtn[j] = document.getElementById("std-experience-delete-" + j);
    ++j;
  </script>
  <% } %>
  <script>
    j = 0;
  </script>

  <!-- Go through all delete buttons for working experience -->
  <% for(var i=0 ; i< count ; ++i) { %>
  <script>
    experienceDeleteBtn[j].onclick = function () {

        deleteExperienceModal.style.display = "block";
        document.getElementById("deleteExperienceNumber").value = '<%= i %>';
      }
      ++j;
  </script>
  <% } %>

  <script>
    //Add other previous education button
    addOtherEducation.onclick = function () {

      addOtherEducation.style.display = "none";
      otherEducation.style.display = "block";
      cancelAddOtherEducation.style.display = "block";
      AddOtherEducationTitle.style.display = "block";

    }

    cancelAddOtherEducation.onclick = function () {
      //   addOtherEducation.style.display = "block";
      otherEducation.style.display = "none";
      cancelAddOtherEducation.style.display = "none";
      AddOtherEducationTitle.style.display = "none";

    }

    //Add work experience button
    addExperience.onclick = function () {
      experienceModalAdd.style.display = "block";
    }

    detailsEditBtn.onclick = function () {
      detailsModal.style.display = "block";
    }

    cancelBtn.onclick = function () {
      modal.style.display = "block";
    }


    function closeModal(modelName) {
      switch (modelName) {
        case "closeAbout":
          aboutModal.style.display = "none";
          break;
        case "closeDetails":
          detailsModal.style.display = "none";
          break;
        case "closeExperience":
          experienceModal.style.display = "none";
          break;
        case "closeEducation":
          educationModal.style.display = "none";
          break;
        case "closeEducationAdd":
          educationModalAdd.style.display = "none";
          currentStudy.style.display = "none";
          previousStudy.style.display = "none";
          otherEducation.style.display = "none";
          nextEducation.style.display = 'none';
          backEducation.style.display = 'none';
          //unselect all the redio buttons
          $("input:radio").attr("checked", false);
          break;
        case "closeExperienceAdd":
          experienceModalAdd.style.display = "none";
          break;
        case "closeOtherEducationAdd":
          OtherEducationModalAdd.style.display = "none";
        case "closeDeleteEducation":
          deleteEducationModal.style.display = "none";
        case "closeDeleteExperience":
          deleteExperienceModal.style.display = "none";
      }
    }

    var currentStudy = document.getElementById('current-study');
    var previousStudy = document.getElementById('previous-study');

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {

      aboutModal.style.display = "none";
      detailsModal.style.display = "none";
      experienceModal.style.display = "none";
      educationModal.style.display = "none";
      experienceModalAdd.style.display = "none";
      educationModalAdd.style.display = "none";
      currentStudy.style.display = "none";
      previousStudy.style.display = "none";
      otherEducation.style.display = "none";
      addOtherEducation.style.display = "none";
      nextEducation.style.display = 'none';
      backEducation.style.display = 'none';
      OtherEducationModalAdd.style.display = "none";
      deleteEducationModal.style.display = "none";
      deleteExperienceModal.style.display = "none";
      //unselect all the redio buttons
      $("input:radio").attr("checked", false);

    }

    // When the user clicks anywhere outside of the modal, close it

    window.onclick = function (event) {
      if (event.target == aboutModal) {
        aboutModal.style.display = "none";
      } else
      if (event.target == detailsModal) {
        detailsModal.style.display = "none";
      } else
      if (event.target == experienceModal) {
        experienceModal.style.display = "none";
      } else
      if (event.target == educationModal) {
        educationModal.style.display = "none";
      } else
      if (event.target == experienceModalAdd) {
        experienceModalAdd.style.display = "none";
      } else
      if (event.target == educationModalAdd) {
        educationModalAdd.style.display = "none";
        currentStudy.style.display = "none";
        previousStudy.style.display = "none";
        otherEducation.style.display = "none";
        addOtherEducation.style.display = "none";
        nextEducation.style.display = 'none';
        backEducation.style.display = 'none';
        //unselect all the redio buttons
        $("input:radio").attr("checked", false);
      } else if (event.target == OtherEducationModalAdd) {
        OtherEducationModalAdd.style.display = "none";
      } else if (event.target == deleteEducationModal) {
        deleteEducationModal.style.display = "none";
      } else if (event.target == deleteExperienceModal) {
        deleteExperienceModal.style.display = "none";
      }
    }

    var status = document.getElementById("education_status");


    //Show or hide current or previous study input according to study-type
    document.getElementById('Undergraduate').onclick = () => {

      previousStudy.style.display = 'none';
      currentStudy.style.display = 'block';
      nextEducation.style.display = "none";
      backEducation.style.display = "none";
      education_status.value = "Undergraduate";
      otherEducation.style.display = "none";
      AddOtherEducationTitle.style.display = "none";
      cancelAddOtherEducation.style.display = "none";
    }

    document.getElementById('Graduate').onclick = () => {

      previousStudy.style.display = 'block';
      currentStudy.style.display = 'none';
      nextEducation.style.display = "none";
      backEducation.style.display = "none";
      education_status.value = "Graduate";
      otherEducation.style.display = "none";
      AddOtherEducationTitle.style.display = "none";
      cancelAddOtherEducation.style.display = "none";

    }

    document.getElementById('Post-graduate').onclick = () => {

      previousStudy.style.display = 'none';
      currentStudy.style.display = 'block';
      nextEducation.style.display = "block";
      backEducation.style.display = "block";
      education_status.value = "Post-graduate";
      backEducation.style.display = "none"
      otherEducation.style.display = "none";
      AddOtherEducationTitle.style.display = "none";
      cancelAddOtherEducation.style.display = "none";

    }

    nextEducation.onclick = () => {

      previousStudy.style.display = 'block';
      currentStudy.style.display = 'none';
      backEducation.style.display = "block"
      nextEducation.style.display = "none";
      education_status.value = "Post-graduate";

    }

    backEducation.onclick = () => {
      previousStudy.style.display = 'none';
      currentStudy.style.display = 'block';
      nextEducation.style.display = "block";
      backEducation.style.display = 'none';
      education_status.value = "Post-graduate";

    }


    function GetSelectedCurrentProvider() {

      //take value from "other provider" input
      if (document.getElementById("selected_current_provider_other").value) {

        var result = document.getElementById("selected_current_provider_other").value;
        document.getElementById("selected_current_provider").value = result;
        //or take value from options list
      } else {
        var e = document.getElementById("current_provider_list");
        var result = e.options[e.selectedIndex].text;
        document.getElementById("selected_current_provider").value = result;
      }

      return result;
    }


    function GetSelectedPreviousProvider() {

      //take value from "other provider" input
      if (document.getElementById("selected_previous_provider_other").value) {

        var result = document.getElementById("selected_previous_provider_other").value;
        document.getElementById("selected_previous_provider").value = result;

      } else {
        var e = document.getElementById("previous_provider_list");
        var result = e.options[e.selectedIndex].text;
        document.getElementById("selected_previous_provider").value = result;
        return result;
      }
    }

    function GetSelectedPreviousProviderOther() {

      //take value from "other provider" input
      if (document.getElementById("selected_previous_provider_other_other").value) {

        var result_other = document.getElementById("selected_previous_provider_other_other").value;
        document.getElementById("selected_previous_provider_other").value = result_other;
        //or take value from options list
      } else {

        var e = document.getElementById("previous_provider_list_other");
        var result_other = e.options[e.selectedIndex].text;
        document.getElementById("selected_previous_provider_other").value = result_other;

      }

      return result_other;
    }

    function GetSelectedEditProvider() {

      //take value from "other provider" input
      if (document.getElementById("selected_edit_provider").value) {

        var result_other = document.getElementById("selected_edit_provider").value;
        document.getElementById("input_selected_edit_provider").value = result_other;
        //or take value from options list
      } else {

        var e = document.getElementById("provider");
        var result_other = e.options[e.selectedIndex].text;
        document.getElementById("input_selected_edit_provider").value = result_other;

      }
      return result_other;
    }

    //Section: Add other provider
    //Show input for other provider different than NZ options 
    document.getElementById("other-provider").onclick = () => {

      var x = document.getElementById("selected_previous_provider_other_other");
      if (x.style.display === "none") {
        document.getElementById("previous_provider_list_other").style.display = "none";
        x.style.display = "block";
        document.getElementById("other-provider").innerText = "Select a NZ provider";
        document.getElementById("other-provider").className = "btn btnGray other mt10";

      } else {
        x.style.display = "none";
        document.getElementById("previous_provider_list_other").style.display = "block";
        x.value = "";
        document.getElementById("other-provider").innerText = "Enter other provider ... ";
        document.getElementById("other-provider").className = "btn btnGray other mt10";
      }
    }

    //Section: Add current provider
    //Show input for other provider different than NZ options 
    document.getElementById("current-provider").onclick = () => {

      var x = document.getElementById("selected_current_provider_other");
      if (x.style.display === "none") {
        document.getElementById("current_provider_list").style.display = "none";
        x.style.display = "block";
        document.getElementById("current-provider").innerText = "Select a NZ provider";
        document.getElementById("current-provider").className = "btn btnGray other mt10";

      } else {
        x.style.display = "none";
        document.getElementById("current_provider_list").style.display = "block";
        x.value = "";
        document.getElementById("current-provider").innerText = "Enter other provider ... ";
        document.getElementById("current-provider").className = "btn btnGray other mt10";
      }
    }


    //Section: Add previous provider 
    //Show input for other provider different than NZ options 
    document.getElementById("previous-provider-button").onclick = () => {

      var x = document.getElementById("selected_previous_provider_other");
      if (x.style.display === "none") {

        x.style.display = "block";
        document.getElementById("previous_provider_list").style.display = "none";
        document.getElementById("previous-provider-button").innerText = "Select a NZ provider";
        document.getElementById("previous-provider-button").className = "btn btnGray other mt10";

      } else {

        x.style.display = "none";
        document.getElementById("previous_provider_list").style.display = "block";
        x.value = "";
        document.getElementById("previous-provider-button").innerText = "Enter other provider ... ";
        document.getElementById("previous-provider-button").className = "btn btnGray other mt10";
      }
    }

    //Edit education provider
    document.getElementById("edit-provider-button").onclick = () => {

      var x = document.getElementById("selected_edit_provider");
      if (x.style.display === "none") {

        x.style.display = "block";
        document.getElementById("provider").style.display = "none";
        document.getElementById("edit-provider-button").innerText = "Select a NZ provider";
        document.getElementById("edit-provider-button").className = "btn btnGray other mt10";

      } else {

        x.style.display = "none";
        document.getElementById("provider").style.display = "block";
        x.value = "";
        document.getElementById("edit-provider-button").innerText = "Enter other provider ... ";
        document.getElementById("edit-provider-button").className = "btn btnGray other mt10";
      }
    }

    //Submit education form after saving the selected current and previous providers
    document.getElementById("education-form-submit").onclick = () => {
      GetSelectedCurrentProvider();
      GetSelectedPreviousProvider();
      $("#current-education-form").submit();
    }

    //Submit add other education form after saving the previous providers
    document.getElementById("other-education-form-submit").onclick = () => {
      GetSelectedPreviousProviderOther();
      $("#add-other-education-form").submit();
    }

    //Submit edit education form after saving the changes
    document.getElementById("edit-provider-submit").onclick = () => {
      GetSelectedEditProvider();
      $("#edit-education-form").submit();
    }
  </script>

  <!-- Added for pop up message -->
  <% popupCounter = 0 %>
  <% if(user.status == "Profile Complete" && popupCounter == 0){ %>
  <% popupCounter = 1 %>
  <script>
    //First log in pop up message

    var lastFocus;

    function onPopupOpen() {
      $("#std-profile").focus();
    }

    function onPopupClose() {

      //Cookie expires after 1 day
      Cookies.set('colorboxShown', 'yes', {
        expires: 1
      });
      var myElement = document.getElementById('popup-modal');
      myElement.style.display = 'none';
      lastFocus.focus();
    }

    function displayPopup() {

      var myElement = document.getElementById('popup-modal');
      myElement.style.display = "block";

      $.colorbox({
        inline: true,
        top: "20%",
        href: "#popup-modal",
        onComplete: onPopupOpen,
        onClosed: onPopupClose
      });
    }

    setTimeout(function () {
      // var popupShown = 0;
      var popupShown = Cookies.get('colorboxShown');

      if (popupShown) {
        console.log("Cookie found. No action necessary");
      } else {
        lastFocus = document.activeElement;
        displayPopup();
      }
    }, 2000);
  </script>
  <% } %>

  <% SkillCount = 0 %>
  <% user.Skills.softs.forEach(function(skill, i) { %>
  <% if(i) { %>
  <% SkillCount = SkillCount + 1; %>
  <script>
    elementId++;
    var skills = document.getElementById("student-skills");
    var newSkills = skills.cloneNode();
    newSkills.id = "student-skills" + elementId;

    var input = document.getElementById("skill");
    input.setAttribute("placeholder", "Type your skill here");
    input.setAttribute("value", "<%= skill %>")
    var list = document.getElementById("skills-list");
    var delSkill = document.getElementById("delete-skill");
    //Clone the list and input

    var clonedInput = input.cloneNode();
    clonedInput.setAttribute("list", "skills-list" + elementId);

    var clonedList = list.cloneNode(true);
    clonedList.id = "skills-list" + elementId;

    var clonedDel = delSkill.cloneNode();
    clonedDel.id = "delete-skill" + elementId;
    clonedDel.innerText = "Delete";

    newSkills.appendChild(clonedInput);
    newSkills.appendChild(clonedList);
    newSkills.appendChild(clonedDel);

    var skillsParent = document.getElementById("student-skills-parent");
    skillsParent.appendChild(newSkills);

    document.getElementById("student-skills" + elementId).style.display = "block";
  </script>
  <% } %>
  <% }) %>
  <script>
    //Student skills part

    increment = "<%= SkillCount %>";

    document.getElementById("add").onclick = () => {

      elementId++;
      var skills = document.getElementById("student-skills");
      var newSkills = skills.cloneNode();

      newSkills.id = "student-skills" + elementId;

      var input = document.getElementById("skill");
      input.setAttribute("placeholder", "Type your skill here");
      input.setAttribute("value", "");
      var list = document.getElementById("skills-list");
      var delSkill = document.getElementById("delete-skill");
      var delScript = "$('#delete-skill" + (elementId) + "').on('click', function(){ " +
        " $('#student-skills" + (elementId) + "').remove(); " +
        "})";



      //Clone the list and input

      var clonedInput = input.cloneNode();
      clonedInput.setAttribute("list", "skills-list" + elementId);

      var clonedList = list.cloneNode();
      clonedList.id = "skills-list" + elementId;

      var clonedDel = delSkill.cloneNode();
      clonedDel.id = "delete-skill" + elementId;
      clonedDel.innerText = "Delete";

      //to create the scripts to delete new skills

      newSkills.appendChild(clonedInput);
      newSkills.appendChild(clonedList);
      newSkills.appendChild(clonedDel);

      var skillsParent = document.getElementById("student-skills-parent");
      skillsParent.appendChild(newSkills);
      document.getElementById("student-skills" + elementId).style.display = "block";


      var newScript = document.createElement("script");
      var inlineScript = document.createTextNode(
        "$('#delete-skill" + (elementId) + "').on('click', function(){ " +
        " $('#student-skills" + (elementId) + "').remove(); " +
        "})");

      newScript.appendChild(inlineScript);
      $("#del-skills-parent").append(newScript);


      increment++;
    }
  </script>

  <script>
    var skillDeleteBtn = [];
    j = 0;
  </script>

  <% for(i=0 ; i< SkillCount; ++i) { %>
  <script>
    skillDeleteBtn[j] = "delete-skill" + (j + 1);
    ++j;
  </script>
  <% } %>

  <script>
    j = 0;
  </script>

  <% for(i=0 ; i< SkillCount; ++i) { %>
  <script id="here">
    document.getElementById(skillDeleteBtn[j]).onclick = function () {
        console.log("clicked " + "<%= i +1 %>");
        console.log("#student-skills<%= i +1  %>");
        $("#student-skills<%= i +1  %>").remove();
      }
      ++j;
  </script>
  <% } %>

  <script>
    document.getElementById("submit-about-form").onclick = () => {
      $("#edit-about-form").submit();
    }
  </script>

  <script>
    var fileInput = document.getElementById('fileInput');
    var fileDisplayArea = document.getElementById('fileDisplayArea');
    var y;

    fileInput.addEventListener('change', function (e) {
      var file = fileInput.files[0];
      var imageType = /image.*/;

      if (file.type.match(imageType)) {
        var reader = new FileReader();

        reader.onload = function (e) {
          fileDisplayArea.innerHTML = "";

          var img = new Image();
          img.src = reader.result;
          img.setAttribute("class", "profile-img");


          fileDisplayArea.appendChild(img);

          y = document.createElement('a'); // is a node
          y.setAttribute("href", img.src);
          y.id = "newPhotoLink"
          fileDisplayArea.appendChild(y);
        }
        reader.readAsDataURL(file);

      } else {
        fileDisplayArea.innerHTML = "File not supported!"
      }
    });


    document.getElementById("detailsSubmit").onclick = () => {

      if (document.getElementById("newPhotoLink")) {
        var newPhotoLink = document.getElementById("newPhotoLink").href;

        if (newPhotoLink)
          document.getElementById("newPhoto").value = newPhotoLink;
      }
      $("#edit-details-form").submit();
    }
  </script>

  <div id="del-skills-parent">
  </div>

</body>
<!-- <div w3-include-html="/partials/footer.html"></div> -->

</html>